
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Guide de l'utilisateur - Environnement d’Analyse Collaborative (EAC)">
      
      
      
        <link rel="canonical" href="https://statcan.github.io/cae-eac/fr/DeltaLake/">
      
      
        <link rel="prev" href="../R-Shiny/">
      
      
        <link rel="next" href="../Geo/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.6">
    
    
      
        <title>Delta Lake - Statistique Canada - Environnement d’Analyse Collaborative (EAC)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="teal">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#documentation-microsoft" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href=".." title="Statistique Canada - Environnement d’Analyse Collaborative (EAC)" class="md-header__button md-logo" aria-label="Statistique Canada - Environnement d’Analyse Collaborative (EAC)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Statistique Canada - Environnement d’Analyse Collaborative (EAC)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Delta Lake
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/statcan/cae-eac" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    statcan/cae-eac
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Statistique Canada - Environnement d’Analyse Collaborative (EAC)" class="md-nav__button md-logo" aria-label="Statistique Canada - Environnement d’Analyse Collaborative (EAC)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Statistique Canada - Environnement d’Analyse Collaborative (EAC)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/statcan/cae-eac" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    statcan/cae-eac
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        En avant!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../InscrivezProjet/" class="md-nav__link">
        Inscrivez votre projet
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ContactezNous/" class="md-nav__link">
        Contactez-nous
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../SeConnecter/" class="md-nav__link">
        Se connecter
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../TableauxDeBord/" class="md-nav__link">
        Tableaux de bord
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../MachinesVirtuelle/" class="md-nav__link">
        Machines Virtuelle
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../DataBricks/" class="md-nav__link">
        Azure Databricks
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../DataFactory/" class="md-nav__link">
        Azure Data Factory
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../AzureStorage/" class="md-nav__link">
        Stockage Azure
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../AzureML/" class="md-nav__link">
        Azure Machine Learning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../AzureSynapse/" class="md-nav__link">
        Azure Synapse
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../AzureSQL/" class="md-nav__link">
        Base de données Azure SQL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../PostgreSQL/" class="md-nav__link">
        Base de données Azure Postgres
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
      
      
      
        <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
          GitHub
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          GitHub
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GitHubCommencer/" class="md-nav__link">
        Commencer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GitHubConfiguration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../R-Shiny/" class="md-nav__link">
        R-Shiny
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Delta Lake
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Delta Lake
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation-microsoft" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documents-officielle" class="md-nav__link">
    Documents Officielle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comment-fonctionne-le-delta-lake" class="md-nav__link">
    Comment fonctionne le Delta Lake
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quand-utiliser-delta-lake" class="md-nav__link">
    Quand utiliser Delta Lake
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deplacement-dans-le-temps" class="md-nav__link">
    Déplacement dans le temps
  </a>
  
    <nav class="md-nav" aria-label="Déplacement dans le temps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#suppression-des-anciens-fichiers-de-donnees" class="md-nav__link">
    Suppression des anciens fichiers de données
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revenir-a-une-version-anterieure" class="md-nav__link">
    Revenir à Une Version Antérieure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documents-officiels" class="md-nav__link">
    Documents officiels
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-de-delta-lake-dans-databricks" class="md-nav__link">
    Utilisation de Delta Lake dans Databricks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecrire-au-format-delta" class="md-nav__link">
    écrire au format delta
  </a>
  
    <nav class="md-nav" aria-label="écrire au format delta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentation-microsoft_1" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-de-delta-dans-azure-synapse" class="md-nav__link">
    Utilisation de Delta dans Azure Synapse
  </a>
  
    <nav class="md-nav" aria-label="Utilisation de Delta dans Azure Synapse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentation-microsoft_2" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-de-delta-lake-dans-data-factory" class="md-nav__link">
    Utilisation de Delta Lake dans Data Factory
  </a>
  
    <nav class="md-nav" aria-label="Utilisation de Delta Lake dans Data Factory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exemple-copier-des-donnees-dans-delta-lake" class="md-nav__link">
    Exemple : copier des données dans Delta Lake
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-microsoft_3" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-de-delta-avec-power-bi" class="md-nav__link">
    Utilisation de Delta avec Power BI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delta-dans-azure-machine-learning" class="md-nav__link">
    Delta dans Azure Machine Learning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Geo/" class="md-nav__link">
        Géospatial
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../BonnesPratiques/" class="md-nav__link">
        Bonnes pratiques
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Langue/" class="md-nav__link">
        Langue
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation-microsoft" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documents-officielle" class="md-nav__link">
    Documents Officielle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comment-fonctionne-le-delta-lake" class="md-nav__link">
    Comment fonctionne le Delta Lake
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quand-utiliser-delta-lake" class="md-nav__link">
    Quand utiliser Delta Lake
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deplacement-dans-le-temps" class="md-nav__link">
    Déplacement dans le temps
  </a>
  
    <nav class="md-nav" aria-label="Déplacement dans le temps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#suppression-des-anciens-fichiers-de-donnees" class="md-nav__link">
    Suppression des anciens fichiers de données
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revenir-a-une-version-anterieure" class="md-nav__link">
    Revenir à Une Version Antérieure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documents-officiels" class="md-nav__link">
    Documents officiels
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-de-delta-lake-dans-databricks" class="md-nav__link">
    Utilisation de Delta Lake dans Databricks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecrire-au-format-delta" class="md-nav__link">
    écrire au format delta
  </a>
  
    <nav class="md-nav" aria-label="écrire au format delta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentation-microsoft_1" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-de-delta-dans-azure-synapse" class="md-nav__link">
    Utilisation de Delta dans Azure Synapse
  </a>
  
    <nav class="md-nav" aria-label="Utilisation de Delta dans Azure Synapse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentation-microsoft_2" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-de-delta-lake-dans-data-factory" class="md-nav__link">
    Utilisation de Delta Lake dans Data Factory
  </a>
  
    <nav class="md-nav" aria-label="Utilisation de Delta Lake dans Data Factory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exemple-copier-des-donnees-dans-delta-lake" class="md-nav__link">
    Exemple : copier des données dans Delta Lake
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-microsoft_3" class="md-nav__link">
    Documentation Microsoft
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-de-delta-avec-power-bi" class="md-nav__link">
    Utilisation de Delta avec Power BI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delta-dans-azure-machine-learning" class="md-nav__link">
    Delta dans Azure Machine Learning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Delta Lake</h1>

<p>Delta Lake est une couche de stockage à code source ouvert qui s’exécute au-dessus d’un lac de données existant, ajoutant les capacités des propriétés et des transactions ACID (atomicité, cohérence, isolation, durabilité). Delta Lake est entièrement compatible avec Apache Spark dans Azure Databricks et Azure Synapse.</p>
<p>Azure Data Lake <em>n’est pas</em> conforme à la norme ACID. Il convient donc d’utiliser Delta Lake lorsque l’intégrité et la fiabilité des données sont essentielles, ou lorsqu’il existe un risque de mauvaises données.</p>
<h4 id="documentation-microsoft">Documentation Microsoft</h4>
<ul>
<li><a href="https://docs.microsoft.com/fr-ca/azure/synapse-analytics/spark/apache-spark-what-is-delta-lake">Présentation de Delta Lake</a></li>
<li><a href="https://techcommunity.microsoft.com/t5/analytics-on-azure/delta-lake-on-azure/ba-p/1869746">Delta Lake sur Azure</a></li>
</ul>
<h4 id="documents-officielle">Documents Officielle</h4>
<ul>
<li><a href="https://docs.delta.io/latest/index.html">Documentation Delta Lake</a></li>
</ul>
<h3 id="comment-fonctionne-le-delta-lake">Comment fonctionne le Delta Lake</h3>
<p>Un lac delta est essentiellement un dossier à l'intérieur du lac de données contenant des <strong>fichiers journaux</strong> (dans le sous-dossier <strong>_delta_log</strong>) et des <strong>fichiers de données</strong> (stockés au format parquet dans le dossier racine) pour chaque version d'un tableau. Tant que les fichiers journaux et de données existent, vous pouvez utiliser la fonction de voyage dans le temps pour interroger les versions précédentes d'une table delta et afficher l'historique de cette table.</p>
<p><strong>Si les fichiers journaux sont supprimés</strong>, vous ne pourrez pas du tout lire le tableau. Pour résoudre ce problème, vous devrez vider le dossier du Delta Lake (supprimer tout ce qu'il contient), puis y écrire votre fichier de données d'origine pour recommencer.</p>
<p>Delta fonctionne au niveau des tables, ce qui signifie que les requêtes et les jointures sur plusieurs tables ne sont pas prises en charge.</p>
<h3 id="quand-utiliser-delta-lake">Quand utiliser Delta Lake</h3>
<p>Delta Lake est préférable:</p>
<ul>
<li>Pour toute table permanente dans Databricks;</li>
<li>Pour les grandes quantités de données semi-structurées (10 millions d’enregistrements ou plus pour obtenir les meilleurs avantages sur le plan de la performance);</li>
<li>Lorsque vous souhaitez un contrôle de version ou un suivi de l’accès aux données (les fichiers journaux delta permettent de savoir chaque fois que les données sont modifiées et par qui).</li>
</ul>
<h3 id="deplacement-dans-le-temps">Déplacement dans le temps</h3>
<p>Vous pouvez utiliser le déplacement dans le temps pour interroger un ancien instantané d’une table, soit par numéro de version, soit par horodatage. Par défaut, les fichiers de données sont conservés pendant 30 jours.</p>
<p>Exemple:</p>
<p><strong>SQL</strong></p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM example_table TIMESTAMP AS OF &#39;2018-10-18T22:15:12.013Z&#39;
SELECT * FROM delta.`/delta/example_table` VERSION AS OF 12
</code></pre></div>

<p><strong>Python</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;timestampAsOf&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;/delta/example_table&quot;</span><span class="p">)</span>
<span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;timestampAsOf&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2019</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span><span class="n">Z</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;/delta/example_table&quot;</span><span class="p">)</span>
<span class="n">df3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;versionAsOf&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;/delta/example_table&quot;</span><span class="p">)</span>
</code></pre></div>

<h4 id="suppression-des-anciens-fichiers-de-donnees">Suppression des anciens fichiers de données</h4>
<p>Pour supprimer les anciens fichiers de données (pas les fichiers journaux) qui ne sont plus référencés par une table delta, vous pouvez exécuter la commande <strong>vacuum</strong>.</p>
<p>Exemple:</p>
<p><strong>SQL</strong></p>
<div class="codehilite"><pre><span></span><code>VACUUM example_table   -- fichiers vacuum non requis par les versions antérieures à la période de rétention par défaut

VACUUM &#39;/data/example_table&#39; -- fichiers vides dans une table basée sur les chemins

VACUUM delta.`/data/example_table/`

VACUUM delta.`/data/example_table/` RETAIN 100 HOURS  -- fichiers vides non requis par les versions de plus de 100 heures

VACUUM example_table DRY RUN    -- faire un essai à sec pour obtenir la liste des fichiers à supprimer
</code></pre></div>

<p><strong>Python</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">delta.tables</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">deltaTable</span> <span class="o">=</span> <span class="n">DeltaTable</span><span class="o">.</span><span class="n">forPath</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="n">pathToTable</span><span class="p">)</span>

<span class="n">deltaTable</span><span class="o">.</span><span class="n">vacuum</span><span class="p">()</span>        <span class="c1"># fichiers vacuum non requis par les versions antérieures à la période de rétention par défaut</span>

<span class="n">deltaTable</span><span class="o">.</span><span class="n">vacuum</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>     <span class="c1"># fichiers vides non requis par les versions de plus de 100 heures</span>
</code></pre></div>

<p><strong>Scala</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">io.delta.tables._</span>

<span class="n">val</span> <span class="n">deltaTable</span> <span class="o">=</span> <span class="n">DeltaTable</span><span class="o">.</span><span class="n">forPath</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="n">pathToTable</span><span class="p">)</span>

<span class="n">deltaTable</span><span class="o">.</span><span class="n">vacuum</span><span class="p">()</span>        <span class="o">//</span> <span class="n">fichiers</span> <span class="n">vacuum</span> <span class="n">non</span> <span class="n">requis</span> <span class="n">par</span> <span class="n">les</span> <span class="n">versions</span> <span class="n">antérieures</span> <span class="n">à</span> <span class="n">la</span> <span class="n">période</span> <span class="n">de</span> <span class="n">rétention</span> <span class="n">par</span> <span class="n">défaut</span>

<span class="n">deltaTable</span><span class="o">.</span><span class="n">vacuum</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>     <span class="o">//</span> <span class="n">fichiers</span> <span class="n">vides</span> <span class="n">non</span> <span class="n">requis</span> <span class="n">par</span> <span class="n">les</span> <span class="n">versions</span> <span class="n">de</span> <span class="n">plus</span> <span class="n">de</span> <span class="mi">100</span> <span class="n">heures</span>
</code></pre></div>

<h4 id="revenir-a-une-version-anterieure">Revenir à Une Version Antérieure</h4>
<p>Vous pouvez revenir à une version précédente de votre table et y travailler en utilisant la fonction de voyage dans le temps pour lire votre version cible en tant que trame de données, puis la réécrire dans le dossier delta lake.</p>
<p>Cela créera une nouvelle version identique à la version cible, à partir de laquelle vous pourrez ensuite travailler. Les autres versions précédentes restent intactes.</p>
<p>Exemple:</p>
<p><strong>Python</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># lire dans l&#39;ancienne version du tableau</span>
<span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;versionAsOf&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">delta_table_path</span><span class="p">)</span>

<span class="c1"># réécrire dans la nouvelle version de la table, doit définir le mode sur &quot;overwrite&quot;</span>
<span class="n">df</span><span class="o">.</span><span class="n">write</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="s2">&quot;overwrite&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">delta_table_path</span><span class="p">)</span>
</code></pre></div>

<h4 id="documents-officiels">Documents officiels</h4>
<ul>
<li><a href="https://docs.delta.io/latest/delta-batch.html#-deltatimetravel">Interroger un ancien instantané d'une table (voyage dans le temps)</a></li>
<li><a href="https://docs.delta.io/latest/delta-utility.html#-delta-vacuum">Supprimer les fichiers qui ne sont plus référencés par une table delta</a></li>
</ul>
<h3 id="utilisation-de-delta-lake-dans-databricks">Utilisation de Delta Lake dans Databricks</h3>
<p>Databricks prend en charge en natif Delta Lake et peut exécuter des requêtes à l'aide de Python, R, Scala et SQL.</p>
<ol>
<li>
<p>Vous devez d'abord créer un répertoire pour stocker les fichiers delta et noter le chemin d'accès à ce répertoire.</p>
</li>
<li>
<p>Lisez votre fichier de données, puis écrivez-le au format "delta" et enregistrez-le dans le répertoire créé ci-dessus.
    ```
    # lire le fichier de données
    testData = spark.read.format('json').options(header='true', inferSchema='true', multiline='true').load('/mnt/public-data/incoming/covid_tracking.json')</p>
<h2 id="ecrire-au-format-delta">écrire au format delta</h2>
<p>testData.write.format("delta").mode("overwrite").save("/mnt/public-data/delta")
```</p>
</li>
<li>
<p>Facultatif (<strong>pas une bonne pratique</strong>) : créez une table SQL à l'aide de delta:
    <code>spark.sql("CREATE TABLE sample_table USING DELTA LOCATION '/mnt/public-data/delta/'")</code></p>
</li>
<li>
<p>Vous pouvez maintenant exécuter des requêtes SQL sur votre table delta, y compris des requêtes par numéro de version ou horodatage pour "voyager dans le temps" vers les versions précédentes de vos données. <strong>Si vous avez créé une table à l'étape 3</strong>, vous pouvez exécuter des requêtes en utilisant le nom de la table. <strong>Sinon (meilleure pratique)</strong>, à la place du nom de la table, vous pouvez utiliser <em>delta.`{delta_table_path}`</em> (remplacez {delta_table_path} par le chemin réel).
    ```
    %sql
    SELECT * FROM sample_table VERSION AS OF 0</p>
<p>SELECT * FROM delta.<code>/mnt/public-data/delta/</code>
```</p>
</li>
</ol>
<h4 id="documentation-microsoft_1">Documentation Microsoft</h4>
<ul>
<li><a href="https://docs.microsoft.com/fr-ca/azure/databricks/delta/quick-start">Démarrage rapide du Delta Lake</a></li>
</ul>
<h3 id="utilisation-de-delta-dans-azure-synapse">Utilisation de Delta dans Azure Synapse</h3>
<p>Delta Lake est compatible avec Azure Synapse. Les tables delta peuvent être créées et interrogées dans les blocs-notes Synapse de la même manière que Databricks, avec la prise en charge du langage pour PySpark, Scala et .NET (C#). Notez que SQL n'est <em>pas</em> pris en charge avec la version actuelle.</p>
<ol>
<li>
<p>Lisez votre fichier de données.
    <code>data = spark.read.format('csv').options(header='true', inferSchema='true', multiline='true').load('abfss://public-data@statsconviddsinternal.dfs.core.windows.net/incoming/data_duplicate.csv')</code></p>
</li>
<li>
<p>Écrivez au format delta et enregistrez dans votre répertoire de table delta.
    <code>data.write.format("delta").save(delta_table_path)</code></p>
</li>
<li>
<p>Facultatif : créez une table SQL à l'aide de delta (requis uniquement si vous souhaitez exécuter des requêtes SQL, <strong>pas nécessaire si vous utilisez uniquement Python, Scala ou C#</strong>).
    <code>spark.sql("CREATE TABLE example USING DELTA LOCATION '{0}'".format(delta_table_path))</code></p>
</li>
<li>
<p>Vous pouvez maintenant exécuter des requêtes sur vos données.</p>
</li>
</ol>
<h4 id="documentation-microsoft_2">Documentation Microsoft</h4>
<ul>
<li><a href="https://docs.microsoft.com/fr-ca/azure/synapse-analytics/spark/apache-spark-delta-lake-overview?pivots=programming-language-python">Travailler avec Delta Lake</a></li>
</ul>
<h3 id="utilisation-de-delta-lake-dans-data-factory">Utilisation de Delta Lake dans Data Factory</h3>
<p>Vous pouvez utiliser Azure Data Factory pour copier des données vers et depuis un Delta Lake stocké dans Azure Data Lake.</p>
<h4 id="exemple-copier-des-donnees-dans-delta-lake">Exemple : copier des données dans Delta Lake</h4>
<ol>
<li>Créez un nouveau flux de données et ajoutez une source.</li>
<li>Sous l'onglet <strong>Paramètres source</strong>, ajoutez l'ensemble de données à partir duquel vous souhaitez copier. Configurez tous les autres paramètres pertinents.</li>
<li>Cliquez sur le bouton plus à droite de votre source et ajoutez un récepteur.</li>
<li>Sous l'onglet <strong>Récepteur</strong>, choisissez <strong>En ligne</strong> comme type de récepteur et <strong>Delta</strong> comme type de jeu de données en ligne.</li>
<li>Sous l'onglet <strong>Paramètres</strong>, définissez le <strong>chemin du dossier</strong> (le chemin vers lequel vos fichiers delta seront stockés).</li>
</ol>
<h4 id="documentation-microsoft_3">Documentation Microsoft</h4>
<ul>
<li><a href="https://docs.microsoft.com/fr-ca/azure/data-factory/format-delta">Format Delta dans Azure Data Factory</a></li>
</ul>
<h3 id="utilisation-de-delta-avec-power-bi">Utilisation de Delta avec Power BI</h3>
<p>Pour lire les tables delta de manière native dans Power BI, veuillez consulter <a href="https://github.com/gbrueckl/PowerBI/tree/main/PowerQuery/DeltaLake">cette documentation sur GitHub</a>.</p>
<h3 id="delta-dans-azure-machine-learning">Delta dans Azure Machine Learning</h3>
<p>Le Delta Lake n'est actuellement pas pris en charge dans Azure ML.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020 Statistique Canada
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/statcan/cae-eac" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://cae-eac.slack.com" target="_blank" rel="noopener" title="cae-eac.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>